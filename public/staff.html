<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ˆê°€ì§š ì§ì› ê´€ë¦¬</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* [ê³µí†µ] ë±ƒì§€ ìŠ¤íƒ€ì¼ */
        .count-badge {
            background: #ff5722; color: white; padding: 5px 12px;
            border-radius: 20px; font-size: 14px; font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* [ì£¼ê°„] í‘œ ìŠ¤íƒ€ì¼ ê°œì„  */
        .weekly-container {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background: white;
        }
        .weekly-header {
            background: #4CAF50; color: white;
            padding: 10px 0; text-align: center; font-weight: bold;
            border-right: 1px solid rgba(255,255,255,0.2);
        }
        .weekly-header.sunday { background: #e53935; }
        .weekly-header.saturday { background: #1e88e5; }

        .weekly-col {
            border-right: 1px solid #eee;
            min-height: 300px;
            padding: 5px;
            background: #fafafa;
        }
        .weekly-col:last-child { border-right: none; }

        /* [NEW] ì˜¤ëŠ˜ ë‚ ì§œ ê°•ì¡° ìŠ¤íƒ€ì¼ */
         .today-highlight {
            background-color: #e8f5e9 !important; /* ì—°í•œ ì´ˆë¡ìƒ‰ ë°°ê²½ */
            border: 2px solid #28a745 !important;  /* ì§„í•œ ì´ˆë¡ìƒ‰ í…Œë‘ë¦¬ */
            position: relative;
        }
        
        /* [NEW] ì˜¤ëŠ˜/ì´ë²ˆì£¼ ë¦¬ì…‹ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .reset-btn {
            background: white;
            border: 1px solid #ccc;
            color: #333;
            padding: 5px 12px;
            margin: 0 10px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            transition: all 0.2s;
        }
        .reset-btn:hover {
            background: #f1f3f5;
            border-color: #bbb;
        }
        
        /* ê·¼ë¬´ì ì¹´ë“œ (ì£¼ê°„) */
        .staff-card-weekly {
            background: white;
            border-left: 4px solid #2196F3;
            padding: 8px; margin-bottom: 5px;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            font-size: 12px;
        }
        .staff-card-weekly.exception { background: #fff3cd; border-color: #ffc107; }
        
        .staff-card-weekly strong { display: block; font-size: 13px; margin-bottom: 2px; }
        .staff-card-weekly span { color: #666; font-size: 11px; }

        /* [ì›”ë³„] ìº˜ë¦°ë” ìŠ¤íƒ€ì¼ */
        .calendar-controls {
            display: flex; justify-content: center; align-items: center;
            margin-bottom: 20px; gap: 20px;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #ddd;
            border: 1px solid #ddd;
        }
        .calendar-head {
            background: #f8f9fa; padding: 10px; text-align: center;
            font-weight: bold; color: #333;
        }
        .calendar-day {
            background: white; min-height: 100px; padding: 5px;
            cursor: pointer; position: relative;
            transition: background 0.2s;
        }
        .calendar-day:hover { background: #f1f3f5; }
        .calendar-day.empty { background: #f9f9f9; cursor: default; }
        .calendar-date-num { font-weight: bold; margin-bottom: 5px; display: block; }
        .calendar-staff-count {
            display: block; background: #e3f2fd; color: #1565c0;
            padding: 4px; border-radius: 4px; text-align: center;
            font-size: 12px; font-weight: bold; margin-top: 5px;
        }
        .calendar-day.sunday .calendar-date-num { color: red; }
        .calendar-day.saturday .calendar-date-num { color: blue; }

        /* [ê¸°íƒ€] ê¸°ì¡´ ìŠ¤íƒ€ì¼ */
        .log-table { width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 10px; }
        .log-table th { background: #eee; padding: 8px; text-align: left; border-bottom: 2px solid #ddd; }
        .log-table td { padding: 8px; border-bottom: 1px solid #eee; }
        .log-action-ë“±ë¡ { color: #28a745; font-weight: bold; }
        .log-action-ìˆ˜ì • { color: #ffc107; font-weight: bold; }
        .log-action-ì‚­ì œ { color: #dc3545; font-weight: bold; }
        .bulk-guide { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px; font-size: 13px; line-height: 1.6; }

        /* [NEW] ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); display: none;
            justify-content: center; align-items: center; z-index: 2000;
        }
        .modal-box {
            background: white; padding: 25px; border-radius: 10px;
            width: 90%; max-width: 400px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .modal-box h2 { margin-bottom: 15px; text-align: center; }
        .modal-field { margin-bottom: 15px; }
        .modal-field label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 13px; }
        .modal-actions { display: flex; gap: 10px; margin-top: 20px; }

        @media (max-width: 768px) {
            .status-container { overflow-x: auto; -webkit-overflow-scrolling: touch; }
            .weekly-container { display: grid; min-width: 700px; }
            .weekly-header { display: block; font-size: 12px; }
            .weekly-col { min-height: 150px; border-bottom: none; padding: 5px; }
            .weekly-col::before { content: none; }
        }

        .tabs {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* í•œ ì¤„ì— 3ê°œì”© */
            gap: 5px;
            background: transparent;
            box-shadow: none;
            margin-bottom: 15px;
        }
        .tab {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px 5px;
            font-size: 13px;
        }
        .tab.active {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* [NEW] ê°€ê³„ë¶€ ìŠ¤íƒ€ì¼ */
        .accounting-card {
            background: white; border-radius: 10px; padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 15px;
        }
        .profit-display {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white; padding: 20px; border-radius: 10px; text-align: center;
            margin-bottom: 20px;
        }
        .profit-amount { font-size: 24px; font-weight: bold; margin: 10px 0; }
        .profit-detail { font-size: 12px; opacity: 0.9; display: flex; justify-content: space-around; margin-top: 10px; }
        
        .input-group-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .input-group-row > div { flex: 1; }
        .money-input { text-align: right; color: #333; font-weight: bold; }
        
        .category-label { font-size: 12px; color: #666; margin-bottom: 3px; display: block; }
        
        .acc-table { width: 100%; font-size: 12px; border-collapse: collapse; }
        .acc-table th { background: #f1f3f5; padding: 8px; border-bottom: 1px solid #ddd; }
        .acc-table td { padding: 8px; border-bottom: 1px solid #eee; text-align: right; }
        .acc-table td:first-child { text-align: left; }
    </style>

    <div class="tabs">
        <button class="tab active" onclick="switchTab('daily')">ğŸ“… ì¼ë³„í˜„í™©</button>
        <button class="tab" onclick="switchTab('weekly')">ğŸ“Š ì£¼ê°„ê·¼ë¬´</button>
        <button class="tab" onclick="switchTab('monthly')">ğŸ“† ìº˜ë¦°ë”</button>
        <button class="tab" onclick="switchTab('accounting')" style="background:#e3f2fd; color:#0d47a1;">ğŸ’° ë§¤ì¶œ/ì§€ì¶œ</button>
        <button class="tab" id="manageTabBtn" onclick="switchTab('manage')" style="display:none; background:#fff3cd;">âš™ï¸ ì§ì›ê´€ë¦¬</button>
        <button class="tab" id="logTabBtn" onclick="switchTab('logs')" style="display:none;">ğŸ“ ë³€ê²½ì´ë ¥</button>
    </div>

    <div id="accounting-content" class="tab-content">
        <div class="accounting-header-nav">
            <button onclick="changeAccMonth(-1)" class="nav-btn">â—€ ì „ì›”</button>
            <div class="current-month-display">
                <h2 id="dashboardTitle" style="margin:0;">2024ë…„ 12ì›”</h2>
                <button onclick="resetAccMonth()" class="reset-btn-mini">ì´ë²ˆ ë‹¬ë¡œ ì´ë™</button>
            </div>
            <button onclick="changeAccMonth(1)" class="nav-btn">ìµì›” â–¶</button>
        </div>

        <div class="tabs" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 15px;">
            <button class="tab active" onclick="switchAccSubTab('acc-daily', this)">âœï¸ ì¼ì¼ ì…ë ¥</button>
            <button class="tab" onclick="switchAccSubTab('acc-history', this)">ğŸ“œ ì…ë ¥ ë‚´ì—­</button>
            <button class="tab" onclick="switchAccSubTab('acc-dashboard', this)">ğŸ“Š ì›”ê°„ ë¶„ì„</button>
            <button class="tab" onclick="switchAccSubTab('acc-monthly', this)">ğŸ¢ ê³ ì •ë¹„</button>
        </div>

        <div id="acc-daily" class="acc-sub-content active">
            <div class="accounting-card">
                <div style="background:#e3f2fd; padding:10px; border-radius:5px; margin-bottom:15px; font-size:13px; color:#0d47a1;">
                    ğŸ’¡ <strong>ì•ˆë‚´:</strong> ë‚ ì§œë¥¼ ì„ íƒí•˜ê³  ê¸ˆì•¡ì„ ì…ë ¥í•œ ë’¤ [ì €ì¥í•˜ê¸°]ë¥¼ ëˆ„ë¥´ì„¸ìš”.<br>
                    ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš° <strong>[ì…ë ¥ ë‚´ì—­]</strong> íƒ­ì—ì„œ ìˆ˜ì • ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.
                </div>

                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; border-bottom:1px solid #eee; padding-bottom:10px;">
                    <input type="date" id="accDate" class="date-picker" onchange="loadDailyAccounting()" style="padding:10px; font-size:15px; width:60%;">
                    <button onclick="saveDailyAccounting()" style="width:35%; background:#29b6f6; color:white; border:none; padding:10px; border-radius:5px; font-weight:bold; font-size:14px; box-shadow:0 2px 5px rgba(0,0,0,0.2);">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
                </div>

                <h4 style="color:#607d8b; margin-bottom:10px;">ğŸ’µ ëˆí†µ(ì‹œì¬) ì •ì‚°</h4>
                <div style="background:#f8f9fa; padding:15px; border-radius:8px; border:1px solid #ddd; margin-bottom:20px;">
                    
                    <div style="margin-bottom: 10px;">
                        <span class="category-label" style="font-weight:bold; color:#00796b;">â‘  ì˜ì—… ì‹œì‘ ì „ ëˆí†µ ê¸ˆì•¡ (ì‹œì¬ê¸ˆ+ëˆí†µê¸ˆì•¡)</span>
                        <input type="number" id="inpStartCash" class="money-input" value="100000" oninput="calcDrawerTotal()" style="width:100%; padding:10px; font-size:16px; border:2px solid #00796b;">
                    </div>

                    <div class="input-group-row" style="align-items: center; border-top:1px dashed #ccc; padding-top:10px; margin-top:10px;">
                        <div style="flex:1;">
                            <span class="category-label">â• ì˜¤ëŠ˜ í˜„ê¸ˆ ë§¤ì¶œ</span>
                            <input type="number" id="inpCash" class="money-input" placeholder="0" oninput="calcDrawerTotal()" style="background:#fff;">
                        </div>
                    </div>

                    <div class="input-group-row" style="align-items: center; margin-top:10px;">
                        <div style="flex:1;">
                            <span class="category-label">â– ê³„ì¢Œì´ì²´ (í˜„ê¸ˆX)</span>
                            <input type="number" id="inpTransfer" class="money-input" placeholder="0" oninput="calcDrawerTotal()" style="color:#e65100; background:#fff3e0;">
                        </div>
                        <div style="flex:1;">
                            <span class="category-label">â– ì¤‘ê°„/ë§ˆê° ì…ê¸ˆ</span>
                            <input type="number" id="inpDeposit" class="money-input" placeholder="0" oninput="calcDrawerTotal()" style="color:#d32f2f;">
                        </div>
                    </div>

                    <div style="margin-top:15px; padding:15px; background:#e3f2fd; border-radius:5px; text-align:right;">
                        <span class="category-label" style="color:#1565c0; font-weight:bold; font-size:14px;">ğŸ‘‰ ì§€ê¸ˆ ëˆí†µì— ìˆì–´ì•¼ í•  ëˆ</span>
                        <div id="drawerTotalDisplay" style="font-size:28px; font-weight:bold; color:#1565c0; margin-top:5px;">100,000ì›</div>
                    </div>
                </div>

                <h4 style="color:#1976D2; margin-bottom:10px;">ğŸ’³ ê¸°íƒ€ ë§¤ì¶œ ì…ë ¥</h4>
                <div class="input-grid">
                    <div>
                        <span class="category-label">ğŸ’³ ì¹´ë“œ ë§¤ì¶œ</span>
                        <input type="number" id="inpCard" class="money-input" placeholder="0">
                    </div>
                    <div>
                        <span class="category-label">ğŸ« ìƒí’ˆê¶Œ/ê¸°íƒ€</span>
                        <input type="number" id="inpGift" class="money-input" placeholder="0">
                    </div>
                </div>

                <div style="margin-top:15px;">
                    <span class="category-label">ğŸ“ íŠ¹ì´ì‚¬í•­ (ë©”ëª¨)</span>
                    <input type="text" id="inpNote" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;" placeholder="ì˜ˆ: ë‹¨ì²´ ì˜ˆì•½ ì·¨ì†Œ, ë¹„ ë§ì´ ì˜´">
                </div>

                <h4 style="color:#d32f2f; margin-top:25px; margin-bottom:10px; border-top:1px dashed #ddd; padding-top:15px;">ğŸ“¤ ì¼ì¼ ì§€ì¶œ (ì‹ìì¬/ì¡ë¹„)</h4>
                <div class="input-grid">
                    <div>
                        <span class="category-label">ğŸ¥¬ ì‚¼ì‹œì„¸ë¼(ì•¼ì±„)</span>
                        <input type="number" id="inpFood" class="money-input" placeholder="0">
                    </div>
                    <div>
                        <span class="category-label">ğŸ¥© í•œê°•ìœ í†µ(ê³ ê¸°)</span>
                        <input type="number" id="inpMeat" class="money-input" placeholder="0">
                    </div>
                    <div>
                        <span class="category-label">ğŸ¦ ê¸°íƒ€ ì¡ë¹„</span>
                        <input type="number" id="inpEtc" class="money-input" placeholder="0">
                    </div>
                </div>
            </div>
        </div>

        <div id="acc-history" class="acc-sub-content">
            <div class="accounting-card">
                <h3 class="chart-title">ğŸ“œ ì´ë²ˆ ë‹¬ ì…ë ¥ ë‚´ì—­</h3>
                <div style="overflow-x: auto;">
                    <table class="log-table" style="margin-top:0;">
                        <thead>
                            <tr>
                                <th style="width:50px;">ë‚ ì§œ</th>
                                <th>ì´ë§¤ì¶œ</th>
                                <th>ì´ì§€ì¶œ</th>
                                <th>ìƒì„¸ë‚´ì—­</th>
                                <th style="width:50px;">ê´€ë¦¬</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="acc-dashboard" class="acc-sub-content">
            <div class="dashboard-summary">
                <div class="summary-card total-sales">
                    <div class="lbl">ì´ ë§¤ì¶œ</div>
                    <div class="val" id="dashTotalSales">0ì›</div>
                </div>
                <div class="summary-card total-cost">
                    <div class="lbl">ì´ ì§€ì¶œ</div>
                    <div class="val" id="dashTotalCost">0ì›</div>
                </div>
                <div class="summary-card net-profit">
                    <div class="lbl">ìˆœìˆ˜ìµ (ë§ˆì§„ìœ¨)</div>
                    <div class="val" id="dashNetProfit">0ì›</div>
                    <div class="sub-val" id="dashMargin">0%</div>
                </div>
                <div class="summary-card break-even" style="background:#fff3e0; grid-column: span 3;">
                        <div class="lbl" style="color:#ef6c00;">ğŸ’¡ ì†ìµë¶„ê¸°ì  ë¶„ì„</div>
                        <div class="val" id="dashBreakEven" style="font-size:13px; color:#333; font-weight:normal;">ê³„ì‚° ì¤‘...</div>
                </div>
            </div>

            <div class="accounting-card">
                <h3 class="chart-title">ğŸ“Š ë§¤ì¶œ ìƒì„¸ ë¶„ì„ (ìœ í˜•ë³„)</h3>
                <div id="salesBreakdownChart"></div>
            </div>

            <div class="accounting-card">
                <h3 class="chart-title">ğŸ“‰ ì§€ì¶œ ìƒì„¸ ë¶„ì„ (í° ì§€ì¶œ ìˆœ)</h3>
                <div id="costBreakdownList" class="cost-list"></div>
                <div style="margin-top:15px; padding-top:10px; border-top:1px solid #eee; text-align:right; font-size:12px; color:#666;">
                    * ì§ì› ì¸ê±´ë¹„(ì˜ˆìƒ) <span id="dashStaffCost">0</span>ì› í¬í•¨ë¨
                </div>
            </div>
        </div>

        <div id="acc-monthly" class="acc-sub-content">
            <div class="accounting-card">
                <h4 style="color:#00796b; margin-bottom:10px;">ğŸ—“ï¸ <span id="fixCostTitle">12ì›”</span> ê³ ì • ì§€ì¶œ ì„¤ì •</h4>
                <p style="font-size:12px; color:#666; margin-bottom:15px;">* ì›” 1íšŒ ì²­êµ¬ë˜ê±°ë‚˜ ë§¤ì›” ê³ ì •ì ìœ¼ë¡œ ë‚˜ê°€ëŠ” ë¹„ìš©</p>

                <div class="input-grid">
                    <div>
                        <span class="category-label">ğŸ  ì„ëŒ€ë£Œ</span>
                        <input type="number" id="fixRent" class="money-input" placeholder="0">
                    </div>
                    <div>
                        <span class="category-label">ğŸ’¡ ê´€ë¦¬ë¹„/ê³µê³¼ê¸ˆ</span>
                        <input type="number" id="fixUtility" class="money-input" placeholder="0">
                    </div>
                    <div>
                        <span class="category-label">ğŸ”¥ ê°€ìŠ¤ë¹„</span>
                        <input type="number" id="fixGas" class="money-input" placeholder="0">
                    </div>
                    <div>
                        <span class="category-label">ğŸº ì£¼ë¥˜ (ì›”ë§ê²°ì œ)</span>
                        <input type="number" id="fixLiquor" class="money-input" placeholder="0">
                    </div>
                    <div>
                        <span class="category-label">ğŸ¥¤ ìŒë£Œ (ì›”ë§ê²°ì œ)</span>
                        <input type="number" id="fixBeverage" class="money-input" placeholder="0">
                    </div>
                    <div>
                        <span class="category-label">ğŸ”§ ê¸°íƒ€ ê³ ì •ë¹„</span>
                        <input type="number" id="fixEtc" class="money-input" placeholder="0">
                    </div>
                </div>
                
                <button onclick="saveFixedCost()" style="width:100%; background:#00796b; color:white; padding:12px; border:none; border-radius:5px; font-weight:bold; margin-top:20px;">
                    ğŸ’¾ <span id="fixBtnMonth">12ì›”</span> ë°ì´í„° ì €ì¥
                </button>
            </div>
        </div>
    </div>

    <style>
        .accounting-header-nav { display: flex; justify-content: space-between; align-items: center; background: #fff; padding: 15px; border-radius: 10px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .current-month-display { text-align: center; }
        .nav-btn { background: none; border: 1px solid #ddd; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        .reset-btn-mini { background: #f1f3f5; border: none; font-size: 11px; padding: 2px 8px; border-radius: 10px; cursor: pointer; margin-top: 5px; }

        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        
        .dashboard-summary { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .summary-card { background: white; padding: 15px 5px; border-radius: 10px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .summary-card .lbl { font-size: 11px; color: #666; margin-bottom: 5px; }
        .summary-card .val { font-size: 14px; font-weight: bold; }
        .summary-card.total-sales .val { color: #1976D2; }
        .summary-card.total-cost .val { color: #d32f2f; }
        .summary-card.net-profit { background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; }
        .summary-card.net-profit .lbl { color: #bbdefb; }
        .summary-card.net-profit .val { color: #fff; font-size: 15px; }

        .chart-title { font-size: 14px; color: #333; border-bottom: 2px solid #eee; padding-bottom: 5px; margin-bottom: 10px; }
        .bar-row { display: flex; align-items: center; margin-bottom: 8px; font-size: 12px; }
        .bar-label { width: 80px; text-align: right; margin-right: 10px; color: #555; }
        .bar-track { flex: 1; background: #f1f3f5; height: 15px; border-radius: 4px; overflow: hidden; }
        .bar-fill { height: 100%; display: block; }
        .bar-value { margin-left: 10px; font-weight: bold; width: 60px; text-align: right; }
    </style>

    <style>
        /* ìƒˆë¡œìš´ ê°€ê³„ë¶€ìš© ìŠ¤íƒ€ì¼ */
        /* ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ì„œë¸Œ íƒ­ ë‚´ìš©ì€ ìˆ¨ê¹€ */
    .acc-sub-content {
        display: none;
        animation: fadeIn 0.3s ease-in-out;
    }

    /* active í´ë˜ìŠ¤ê°€ ë¶™ì€ íƒ­ë§Œ í‘œì‹œ */
    .acc-sub-content.active {
        display: block;
    }

    /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼ */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(5px); }
        to { opacity: 1; transform: translateY(0); }
    }
        .accounting-header-nav {
            display: flex; justify-content: space-between; align-items: center;
            background: #fff; padding: 15px; border-radius: 10px; margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .current-month-display { text-align: center; }
        .nav-btn { background: none; border: 1px solid #ddd; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        .reset-btn-mini { background: #f1f3f5; border: none; font-size: 11px; padding: 2px 8px; border-radius: 10px; cursor: pointer; margin-top: 5px; }

        .input-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px;
        }
        @media (max-width: 400px) { .input-grid { grid-template-columns: 1fr; } }
        
        .dashboard-summary {
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px;
        }
        .summary-card {
            background: white; padding: 15px 10px; border-radius: 10px; text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .summary-card .lbl { font-size: 11px; color: #666; margin-bottom: 5px; }
        .summary-card .val { font-size: 15px; font-weight: bold; }
        .summary-card.total-sales .val { color: #1976D2; }
        .summary-card.total-cost .val { color: #d32f2f; }
        .summary-card.net-profit { background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; }
        .summary-card.net-profit .lbl { color: #bbdefb; }
        .summary-card.net-profit .val { color: #fff; font-size: 16px; }
        .sub-val { font-size: 11px; opacity: 0.8; margin-top: 2px; }

        .chart-title { font-size: 14px; color: #333; border-bottom: 2px solid #eee; padding-bottom: 5px; margin-bottom: 10px; }
        
        /* ë°” ì°¨íŠ¸ ìŠ¤íƒ€ì¼ */
        .bar-row { display: flex; align-items: center; margin-bottom: 8px; font-size: 12px; }
        .bar-label { width: 80px; text-align: right; margin-right: 10px; color: #555; }
        .bar-track { flex: 1; background: #f1f3f5; height: 15px; border-radius: 4px; overflow: hidden; position: relative; }
        .bar-fill { height: 100%; border-radius: 4px; display: flex; align-items: center; padding-left: 5px; color: white; font-size: 10px; white-space: nowrap; }
        .bar-value { margin-left: 10px; font-weight: bold; width: 60px; text-align: right; }
    </style>
</head>
<body>
    <div id="loginOverlay" class="modal-overlay">
        <div class="modal-box">
            <h2>ğŸ”’ ê´€ë¦¬ì/ì ì¥ ë¡œê·¸ì¸</h2>
            <p style="margin-bottom:15px; color:#666;">ì§ì› ì •ë³´ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
            <input type="password" id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸" onkeypress="if(event.key==='Enter') tryLogin()" style="width:100%; padding:10px;">
            <div class="modal-actions">
                <button class="btn" onclick="tryLogin()" style="flex:1;">ë¡œê·¸ì¸</button>
                <button class="btn" onclick="closeLoginModal()" style="flex:1; background:#666;">ë‹«ê¸°</button>
            </div>
            <div id="loginError" style="color:red; display:none; margin-top:10px; text-align:center;"></div>
        </div>
    </div>

    <div id="editModalOverlay" class="modal-overlay">
        <div class="modal-box">
            <h2>âœï¸ ì§ì› ì •ë³´ ìˆ˜ì •</h2>
            <input type="hidden" id="editId">
            <div class="modal-field">
                <label>ì´ë¦„</label>
                <input type="text" id="editName" disabled style="background:#eee;">
            </div>
            <div class="modal-field">
                <label>ê·¼ë¬´ ì‹œê°„ (ì˜ˆ: 18:00~23:00)</label>
                <input type="text" id="editTime">
            </div>
            <div style="background:#fff3e0; padding:10px; border-radius:5px; margin-bottom:15px; margin-top:10px;">
                <h4 style="margin:0 0 10px 0; font-size:13px; color:#ef6c00;">ğŸ“… ì…/í‡´ì‚¬ ê´€ë¦¬ (ê¸‰ì—¬ ê³„ì‚°ìš©)</h4>
                <div class="input-group-row"> 
                    <div style="margin-right:10px;">
                        <label style="font-size:12px; font-weight:bold;">ì…ì‚¬ì¼ (Start)</label>
                        <input type="date" id="editStartDate" style="width:100%; padding:5px;">
                    </div>
                    <div>
                        <label style="font-size:12px; font-weight:bold;">í‡´ì‚¬ì¼ (End)</label>
                        <input type="date" id="editEndDate" style="width:100%; padding:5px;">
                    </div>
                </div>
                <p style="font-size:11px; color:#666; margin-top:5px;">* ë¹„ì›Œë‘ë©´ í•´ë‹¹ ì›” ì „ì²´ ê·¼ë¬´ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤. ì…ì‚¬ì¼ ê´€ê³„ì—†ì´ ì›”ê¸‰ê¸°ì¤€ìœ¼ë¡œ ì…ë ¥í•˜ë©´ ìë™ê³„ì‚°ë©ë‹ˆë‹¤</p>
            </div>
            
            <div id="modalSalarySection" style="display:none; background:#f0f8ff; padding:10px; border-radius:5px;">
                <div class="modal-field">
                    <label>ğŸ’° ê¸‰ì—¬ í˜•íƒœ (ì‚¬ì¥ë‹˜ ì „ìš©)</label>
                    <select id="editSalaryType">
                        <option value="hourly">ì‹œê¸‰ (ì•Œë°”)</option>
                        <option value="monthly">ì›”ê¸‰ (ì§ì›)</option>
                    </select>
                </div>
                <div class="modal-field">
                    <label>ê¸ˆì•¡ (ì›)</label>
                    <input type="number" id="editSalary" placeholder="ì˜ˆ: 12000">
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn" onclick="saveStaffEdit()" style="flex:1;">ì €ì¥</button>
                <button class="btn" onclick="closeEditModal()" style="flex:1; background:#666;">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <div id="salaryModal" class="modal-overlay">
        <div class="modal-box" style="max-width:500px;">
            <h2>ğŸ’° ì´ë²ˆ ë‹¬ ì˜ˆìƒ ê¸‰ì—¬</h2>
            <div style="max-height:300px; overflow-y:auto; margin-bottom:15px;">
                <table class="log-table">
                    <thead>
                        <tr>
                            <th>ì´ë¦„</th>
                            <th>êµ¬ë¶„</th>
                            <th>ì¼/ì‹œê°„</th>
                            <th style="text-align:right;">ì˜ˆìƒ ì§€ê¸‰ì•¡</th>
                        </tr>
                    </thead>
                    <tbody id="salaryTableBody"></tbody>
                </table>
            </div>
            <div id="totalSalaryAmount" style="text-align:right; font-size:18px; font-weight:bold; color:#d32f2f;"></div>
            <div class="modal-actions">
                <button class="btn" onclick="closeSalaryModal()" style="width:100%; background:#666;">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <div class="container" id="mainContent">
        <div class="header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <button onclick="location.href='index.html'" style="background:#fff; color:#333; border:none; padding:8px 15px; border-radius:20px; font-weight:bold; cursor:pointer; box-shadow:0 2px 5px rgba(0,0,0,0.2);">
                    ğŸ  ì˜ˆì•½í™ˆ
                </button>
                
                <h1 id="pageTitle" style="font-size: 20px; margin:0;">ğŸ‘¥ ì§ì› ê·¼ë¬´ í˜„í™©</h1>
                
                <button id="loginBtn" onclick="openLoginModal()" style="background: rgba(255,255,255,0.2); color:white; border:1px solid white; padding:6px 12px; border-radius:15px; cursor:pointer; font-size:12px;">
                    ğŸ”’ ê´€ë¦¬ì ë¡œê·¸ì¸
                </button>
                <div id="userInfo" style="display:none; font-size: 12px; background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 15px;"></div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('daily')">ì¼ë³„ í˜„í™©</button>
            <button class="tab" onclick="switchTab('weekly')">ì£¼ê°„ ê·¼ë¬´í‘œ</button>
            <button class="tab" onclick="switchTab('monthly')">ì›”ë³„ ìº˜ë¦°ë”</button>
            <button class="tab" id="manageTabBtn" onclick="switchTab('manage')" style="display:none; background:#fff3cd;">âš™ï¸ ì¸ì› ê´€ë¦¬</button>
            <button class="tab" id="logTabBtn" onclick="switchTab('logs')" style="display:none;">ğŸ“ ë³€ê²½ ì´ë ¥</button>
        </div>

        <div id="daily-content" class="tab-content active">
            <div class="status-container">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                    <button onclick="changeDate(-1)" class="number-btn">&lt;</button>
                    <div style="text-align: center;">
                        <h2 id="currentDateDisplay" style="margin:0;"></h2>
                        <button onclick="resetToToday()" class="reset-btn">ì˜¤ëŠ˜ ë³´ê¸°</button> 
                        <span id="dailyCountBadge" class="count-badge" style="margin-top:5px; display:inline-block;">ì´ 0ëª… ê·¼ë¬´</span>
                    </div>
                    <button onclick="changeDate(1)" class="number-btn">&gt;</button>
                </div>

                <div id="dailyTools" style="text-align:right; margin-bottom:10px; padding:10px; background:#f1f3f5; border-radius:8px;">
                    <span style="font-size:12px; color:#666; margin-right:10px;">âš¡ ì˜¤ëŠ˜ ì¼ì • ê´€ë¦¬:</span>
                    <button onclick="addTempWorker()" style="background:#28a745; color:white; border:none; padding:5px 10px; border-radius:4px; cursor:pointer; font-weight:bold;">+ ì¼ì¼ ëŒ€íƒ€/ì¶”ê°€ ë“±ë¡</button>
                </div>

                <div id="dailyStaffList"></div>
            </div>
        </div>

        <div id="weekly-content" class="tab-content">
            <div class="status-container">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                    <button onclick="changeWeek(-1)" class="number-btn">&lt;</button>
                    <div style="text-align: center;">
                        <h2 id="weeklyRangeDisplay" style="margin:0;">12ì›” 0ì¼ ~ 12ì›” 0ì¼</h2>
                        <button onclick="resetToThisWeek()" class="reset-btn">ì´ë²ˆ ì£¼ ë³´ê¸°</button>
                    </div>
                    <button onclick="changeWeek(1)" class="number-btn">&gt;</button>
                </div>
                
                <div class="weekly-container">
                    <div class="weekly-header sunday">ì¼</div>
                    <div class="weekly-header">ì›”</div>
                    <div class="weekly-header">í™”</div>
                    <div class="weekly-header">ìˆ˜</div>
                    <div class="weekly-header">ëª©</div>
                    <div class="weekly-header">ê¸ˆ</div>
                    <div class="weekly-header saturday">í† </div>
                    
                    <div id="col-Sun" class="weekly-col" data-day="ì¼ìš”ì¼"></div>
                    <div id="col-Mon" class="weekly-col" data-day="ì›”ìš”ì¼"></div>
                    <div id="col-Tue" class="weekly-col" data-day="í™”ìš”ì¼"></div>
                    <div id="col-Wed" class="weekly-col" data-day="ìˆ˜ìš”ì¼"></div>
                    <div id="col-Thu" class="weekly-col" data-day="ëª©ìš”ì¼"></div>
                    <div id="col-Fri" class="weekly-col" data-day="ê¸ˆìš”ì¼"></div>
                    <div id="col-Sat" class="weekly-col" data-day="í† ìš”ì¼"></div>
                </div>
            </div>
        </div>

        <div id="monthly-content" class="tab-content">
            <div class="status-container">
                <div class="calendar-controls">
                    <button onclick="changeMonth(-1)" class="number-btn">&lt;</button>
                    <div style="text-align:center;">
                        <h2 id="monthDisplay" style="margin:0;"></h2>
                        <button onclick="resetToThisMonth()" class="reset-btn" style="margin-top:5px;">ì´ë²ˆ ë‹¬ ë³´ê¸°</button>
                    </div>
                    <button onclick="changeMonth(1)" class="number-btn">&gt;</button>
                </div>
                <div class="calendar-grid">
                    <div class="calendar-head" style="color:red">ì¼</div>
                    <div class="calendar-head">ì›”</div>
                    <div class="calendar-head">í™”</div>
                    <div class="calendar-head">ìˆ˜</div>
                    <div class="calendar-head">ëª©</div>
                    <div class="calendar-head">ê¸ˆ</div>
                    <div class="calendar-head" style="color:blue">í† </div>
                    <div id="calendarBody" style="display:contents;"></div>
                </div>
            </div>
        </div>

        <div id="manage-content" class="tab-content">
            <div class="form-container">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <h2>ì§ì› ë“±ë¡/ê´€ë¦¬</h2>
                    
                    <div id="salarySection" style="display:none;">
                        <button onclick="calculateMonthlySalary()" style="background:#673ab7; color:white; border:none; padding:8px 15px; border-radius:5px; font-weight:bold; cursor:pointer;">
                            ğŸ’° ì´ë²ˆë‹¬ ê¸‰ì—¬ ì˜ˆì¸¡
                        </button>
                    </div>
                </div>
                
                <div id="bulkSection" style="margin-bottom: 30px; display: none;">
                    <h3>ğŸ“‘ ì¼ê´„ ë“±ë¡ (ì‚¬ì¥ë‹˜ ì „ìš©)</h3>
                    <div class="bulk-guide">
                        <strong>ğŸ’¡ ì…ë ¥ í˜•ì‹:</strong> ì´ë¦„, ê·¼ë¬´ìš”ì¼, ì‹œê°„ (í•œ ì¤„ì— í•œ ëª…ì”©)<br>
                        <strong>ì˜ˆì‹œ:</strong><br>
                        ì´ì¤€í˜¸, ì›”í™”ìˆ˜ê¸ˆí† ì¼, 15~03<br>
                        ì„í˜„ì¤€, í† ì¼, 18:00~23:00
                    </div>
                    <textarea id="bulkText" class="bulk-input-area" placeholder="ì´ë¦„, ê·¼ë¬´ìš”ì¼, ì‹œê°„&#13;&#10;ì´ë¦„, ê·¼ë¬´ìš”ì¼, ì‹œê°„" style="height: 200px; width:100%; padding:10px; margin-top:5px;"></textarea>
                    <button class="btn" onclick="processBulkText()">í•œ ë²ˆì— ë“±ë¡í•˜ê¸°</button>
                </div>

                <hr style="margin:20px 0;">
                <h3>ğŸ“‹ ì§ì› ëª©ë¡ (ìˆ˜ì •/ì‚­ì œ)</h3>
                <div id="manageStaffList" style="margin-top:15px;"></div>
            </div>
        </div>

        <div id="logs-content" class="tab-content">
            <div class="status-container">
                <h2>ğŸ“œ ê·¼ë¬´í‘œ ë³€ê²½ ì´ë ¥</h2>
                <div style="overflow-x: auto;">
                    <table class="log-table">
                        <thead>
                            <tr>
                                <th>ì‹œê°„</th>
                                <th>ì‘ì—…ì</th>
                                <th>êµ¬ë¶„</th>
                                <th>ëŒ€ìƒ</th>
                                <th>ë‚´ìš©</th>
                            </tr>
                        </thead>
                        <tbody id="logTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="staff.js"></script>
</body>
</html>